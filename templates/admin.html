{% extends "base.html" %} 
{% block title %}Admin Dashboard{% endblock %} 
{% block content %}

<div class="container mt-5">
  <h1 class="text-center mb-4">Welcome, {{ user.name }} (Admin)</h1>

  <!-- Action Links -->
  <div class="d-flex justify-content-around mb-5">
    <form action="/admin/show_tutors" method="POST">
      <button class="btn btn-primary" type="submit">Show Tutors</button>
    </form>
    <form action="/admin/show_students" method="POST">
      <button class="btn btn-secondary" type="submit">Show Students</button>
    </form>
    <form action="/admin/show_slots" method="POST">
      <button class="btn btn-success" type="submit">Show Slots</button>
    </form>
  </div>

  <!-- Create a Notice -->
  <div class="card mb-5">
    <div class="card-header">
      <h2>Create a Notice</h2>
    </div>
    <div class="card-body">
      <form action="{{ url_for('create_notice') }}" method="POST">
        <div class="mb-3">
          <label for="title" class="form-label">Notice Title:</label>
          <input type="text" id="title" name="title" class="form-control" required />
        </div>
        <div class="mb-3">
          <label for="notice" class="form-label">Notice Content:</label>
          <textarea
            id="notice"
            name="notice"
            class="form-control"
            rows="5"
            required
          ></textarea>
        </div>
        <button type="submit" class="btn btn-primary w-100">Submit Notice</button>
      </form>
    </div>
  </div>

  <!-- Previous Notices -->
  <div class="card">
    <div class="card-header">
      <h2>Previous Notices</h2>
    </div>
    <div class="card-body">
      {% if notices %}
      <ul class="list-group">
        {% for notice in notices %}
        <li class="list-group-item">
          <h3>{{ notice.title }}</h3>
          <p><strong>Notice:</strong></p>
          <p>{{ notice.content }}</p>
          <small class="text-muted">Posted on: {{ notice.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
          <form
            action="{{ url_for('delete_notice', notice_id=notice.id) }}"
            method="POST"
            class="mt-3"
          >
            <button
              type="submit"
              class="btn btn-danger btn-sm"
              onclick="return confirm('Are you sure you want to delete this notice?')"
            >
              Delete
            </button>
          </form>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="text-muted">No notices available.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
